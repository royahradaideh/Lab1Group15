package com.example.myapplication;

import androidx.appcompat.app.AppCompatActivity;

import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class MainActivity extends AppCompatActivity implements View.OnClickListener {

    @Override
    public void onClick(View view) {
        TextView curText = (TextView) findViewById(R.id.resultEdit);


        switch (view.getId()){
            case R.id.btn0:
                curText.setText(curText.getText() + "0");
                break;
            case R.id.btn01:
                curText.setText(curText.getText() + "1");
                break;
            case R.id.btn2:
                curText.setText(curText.getText() + "2");
                break;
            case R.id.btn3:
                curText.setText(curText.getText() + "3");
                break;
            case R.id.btn4:
                curText.setText(curText.getText() + "4");
                break;
            case R.id.btn5:
                curText.setText(curText.getText() + "5");
                break;
            case R.id.btn6:
                curText.setText(curText.getText() + "6");
                break;
            case R.id.btn7:
                curText.setText(curText.getText() + "7");
                break;
            case R.id.btn8:
                curText.setText(curText.getText() + "8");
                break;
            case R.id.btn9:
                curText.setText(curText.getText() + "9");
                break;
            case R.id.btndot:
                curText.setText(curText.getText() + ".");
                break;

        }

    }

    private enum Operator {none, add, minus, multiply, divide};
    private double data1=0,data2=0;
    private Operator optr = Operator.none;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);


        Button btn00= (Button) findViewById(R.id.btn0);
        Button btn01= (Button) findViewById(R.id.btn01);
        Button btn02= (Button) findViewById(R.id.btn2);
        Button btn03= (Button) findViewById(R.id.btn3);
        Button btn04= (Button) findViewById(R.id.btn4);
        Button btn05= (Button) findViewById(R.id.btn5);
        Button btn06= (Button) findViewById(R.id.btn6);
        Button btn07= (Button) findViewById(R.id.btn7);
        Button btn08= (Button) findViewById(R.id.btn8);
        Button btn09= (Button) findViewById(R.id.btn9);
        Button addbtn = (Button) findViewById(R.id.btnplus);
        Button subtractbtn = (Button) findViewById(R.id.btnminus);
        Button multiplybtn = (Button) findViewById(R.id.btnmultiply);
        Button dividebtn = (Button) findViewById(R.id.btndivide);
        Button clearbtn = (Button) findViewById(R.id.btnC);
        Button dotbtn = (Button) findViewById(R.id.btndot);
        Button equalbtn = (Button) findViewById(R.id.equalbtn);

        btn00.setOnClickListener(this);
        btn01.setOnClickListener(this);
        btn02.setOnClickListener(this);
        btn03.setOnClickListener(this);
        btn04.setOnClickListener(this);
        btn05.setOnClickListener(this);
        btn06.setOnClickListener(this);
        btn07.setOnClickListener(this);
        btn08.setOnClickListener(this);
        btn09.setOnClickListener(this);
        dotbtn.setOnClickListener(this);


        addbtn.setOnClickListener(
                (e) -> {
                    optr = Operator.add;
                    EditText eText = (EditText) findViewById(R.id.resultEdit);
                    data1= Double.parseDouble(eText.getText().toString());
                    eText.setText("");
                }
        );
        subtractbtn.setOnClickListener(
                (e) -> {
                    optr = Operator.minus;
                    EditText eText = (EditText) findViewById(R.id.resultEdit);
                    data1 = Double.parseDouble(eText.getText().toString());
                    eText.setText("");
                }
        );

        multiplybtn.setOnClickListener(
                (e) -> {
                    optr = Operator.multiply;
                    EditText eText= (EditText) findViewById(R.id.resultEdit);
                    data1 = Double.parseDouble(eText.getText().toString());
                    eText.setText("");
                }

        );

        dividebtn.setOnClickListener(
                (e) -> {
                    optr = Operator.divide;
                    EditText eText = (EditText) findViewById(R.id.resultEdit);
                    data1 = Double.parseDouble(eText.getText().toString());
                    eText.setText("");
                }
        );

        clearbtn.setOnClickListener(
                (e) ->{
                    EditText eText = (EditText) findViewById(R.id.resultEdit);
                    eText.setText("");
                }
        );

        equalbtn.setOnClickListener(
                (e) ->{
                    if(optr!=Operator.none){
                        EditText eText = (EditText) findViewById(R.id.resultEdit);
                        data2 = Double.parseDouble(eText.getText().toString());
                        double result = 0;

                        if(optr==Operator.add){
                            result= data1+data2;
                        }
                        else if (optr == Operator.minus){
                            result=data1-data2;
                        }
                        else if (optr == Operator.multiply){
                            result = data1 * data2;
                        }
                        else if (optr == Operator.divide){
                            result = data1/data2;
                        }
                        optr = Operator.none;
                        data1 = result;
                        if(result- (int) result !=0 ){
                            eText.setText(String.valueOf(result));
                        }

                        else{
                            eText.setText(String.valueOf((int) result));
                        }
                    }

                }
        );

    }
}
